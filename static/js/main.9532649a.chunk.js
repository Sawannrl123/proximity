(this.webpackJsonpproximity=this.webpackJsonpproximity||[]).push([[0],{169:function(e,t,n){},308:function(e,t,n){},309:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(57),s=n.n(a),o=(n(169),n(104)),i=n(18),j=function(e){return e>=0&&e<=50?l.good:e>50&&e<=100?l.satisfactory:e>100&&e<=200?l.moderate:e>200&&e<=300?l.poor:e>300&&e<=400?l.veryPoor:e>400&&e<=500?l.severe:void 0},l={good:"#66BB6A",satisfactory:"#9CCC65",moderate:"#D4E157",poor:"#FFA726",veryPoor:"#F44336",severe:"#B71C1C"},d=function(e){var t=((new Date).getTime()-new Date(e).getTime())/1e3;if(0===parseInt(t))return"Just Now";if(t<60)return parseInt(t)+" second"+(parseInt(t)>1?"s":"")+" ago";var n=t/60;if(n<60)return parseInt(n)+" minute"+(parseInt(n)>1?"s":"")+" ago";var c=n/60;if(c<24)return parseInt(c)+" hour"+(parseInt(c)>1?"s":"")+" ago";var r=c/24;if(r<30)return parseInt(r)+" day"+(parseInt(r)>1?"s":"")+" ago";var a=r/30;if(a<12)return parseInt(a)+" month"+(parseInt(a)>1?"s":"")+" ago";var s=a/12;return parseInt(s)+" year"+(parseInt(s)>1?"s":"")+" ago"},b=n(2),u=void 0,h=function(){var e=Object(c.useState)(null),t=Object(i.a)(e,2),n=t[0],r=t[1];Object(c.useEffect)((function(){!function(){var e,t=250,n=new WebSocket("wss://city-ws.herokuapp.com/\u200c");n.onopen=function(){console.log("connected websocket app component"),t=250,clearTimeout(e)},n.onmessage=function(e){var t=JSON.parse(e.data);if(t&&Array.isArray(t)){var n=t.reduce((function(e,t){return t.timestamp=new Date,e[t.city]=t,e}),{});r((function(e){return e?Object(o.a)(Object(o.a)({},e),n):n}))}},n.onclose=function(n){console.log("Socket is closed. Reconnect will be attempted in ".concat(Math.min(10,(t+t)/1e3)," second."),n.reason),t+=t,e=setTimeout(a,Math.min(1e4,t))},n.onerror=function(e){console.error("Socket encountered error: ",e.message,"Closing socket"),n.close()}}()}),[]);var a=function(){var e=u.state.ws;e&&e.readyState!==WebSocket.CLOSED||u.connect()};return Object(b.jsxs)("div",{className:"chartContainer",children:[function(){if(null===n)return Object(b.jsx)("p",{className:"noContent",children:"Loading..."});var e=Object.keys(n);return 0===e.length?Object(b.jsx)("p",{className:"noContent",children:"No Data Found."}):Object(b.jsx)("div",{className:"tableWrapper",children:Object(b.jsxs)("table",{cellPadding:"0",cellSpacing:"0",border:"0",className:"apiTable",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:"City"}),Object(b.jsx)("td",{children:"Current AQI"}),Object(b.jsx)("td",{children:"Last Updated"})]})}),Object(b.jsx)("tbody",{children:e.map((function(e){var t=n[e];return Object(b.jsxs)("tr",{style:{backgroundColor:j(t.aqi)},children:[Object(b.jsx)("td",{children:t.city}),Object(b.jsx)("td",{children:t.aqi.toFixed(2)}),Object(b.jsx)("td",{children:d(t.timestamp)})]},e)}))})]})})}(),n&&Object(b.jsx)(w,{aqiData:n})]})},p=function(){return Object(b.jsxs)("ul",{className:"indicator",children:[Object(b.jsxs)("li",{children:[Object(b.jsx)("span",{style:{backgroundColor:l.good}}),Object(b.jsx)("span",{children:"0-50 (Good)"})]}),Object(b.jsxs)("li",{children:[Object(b.jsx)("span",{style:{backgroundColor:l.satisfactory}}),Object(b.jsx)("span",{children:"50-100 (Satisfactory)"})]}),Object(b.jsxs)("li",{children:[Object(b.jsx)("span",{style:{backgroundColor:l.moderate}}),Object(b.jsx)("span",{children:"100-200 (Moderate)"})]}),Object(b.jsxs)("li",{children:[Object(b.jsx)("span",{style:{backgroundColor:l.poor}}),Object(b.jsx)("span",{children:"200-300 (Poor)"})]}),Object(b.jsxs)("li",{children:[Object(b.jsx)("span",{style:{backgroundColor:l.veryPoor}}),Object(b.jsx)("span",{children:"300-400 (Very Poor)"})]}),Object(b.jsxs)("li",{children:[Object(b.jsx)("span",{style:{backgroundColor:l.severe}}),Object(b.jsx)("span",{children:"400-500 (Severe)"})]})]})},O=n(159),x=n(311),f=n(312),m=n(156),y=n(157),g=n(66),v=n(160),C=function(e){var t,n=e.payload,c=e.label;return e.active?Object(b.jsxs)("div",{className:"custom-tooltip",style:{backgroundColor:j(n[0].value)},children:[Object(b.jsx)("h3",{children:(t=n[0].value,t>=0&&t<=50?"Good":t>50&&t<=100?"Satisfactory":t>100&&t<=200?"Moderate":t>200&&t<=300?"Poor":t>300&&t<=400?"Very Poor":t>400&&t<=500?"Severe":void 0)}),Object(b.jsx)("p",{className:"city",children:c}),Object(b.jsx)("p",{className:"aqi",children:"Aqi : ".concat(n[0].value.toFixed(2))}),Object(b.jsx)("p",{className:"updatedAt",children:"Last Updated: ".concat(d(n[0].payload.timestamp))})]}):null},k=function(e){var t=e.x,n=e.y,c=e.width,r=e.height,a=e.aqi;return Object(b.jsx)("rect",{x:t,y:n,width:c,height:r,style:{fill:j(a)}})},w=function(e){var t=e.aqiData,n=Object.keys(t).reduce((function(e,n){return e=[].concat(Object(O.a)(e),[t[n]])}),[]);return Object(b.jsx)("div",{className:"chartWrapper",children:Object(b.jsx)(x.a,{width:"100%",height:"100%",children:Object(b.jsxs)(f.a,{width:500,height:300,data:n,margin:{top:5,right:30,left:20,bottom:5},children:[Object(b.jsx)(m.a,{dataKey:"city",stroke:"#fff"}),Object(b.jsx)(y.a,{tickCount:25,stroke:"#fff"}),Object(b.jsx)(g.a,{content:Object(b.jsx)(C,{})}),Object(b.jsx)(v.a,{dataKey:"aqi",fill:"#fff",shape:Object(b.jsx)(k,{})})]})})})},I=(n(308),function(){return Object(b.jsxs)("div",{className:"app",children:[Object(b.jsx)("header",{className:"header",children:Object(b.jsx)("h1",{children:"Air Quality Monitoring"})}),Object(b.jsxs)("main",{children:[Object(b.jsx)(p,{}),Object(b.jsx)(h,{})]})]})}),N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,317)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};s.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(I,{})}),document.getElementById("root")),N()}},[[309,1,2]]]);
//# sourceMappingURL=main.9532649a.chunk.js.map