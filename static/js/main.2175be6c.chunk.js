(this.webpackJsonpproximity=this.webpackJsonpproximity||[]).push([[0],{169:function(e,t,c){},308:function(e,t,c){},309:function(e,t,c){"use strict";c.r(t);var n=c(0),r=c.n(n),a=c(57),s=c.n(a),o=(c(169),c(104)),i=c(18),j=function(e){return e>=0&&e<=50?l.good:e>50&&e<=100?l.satisfactory:e>100&&e<=200?l.moderate:e>200&&e<=300?l.poor:e>300&&e<=400?l.veryPoor:e>400&&e<=500?l.severe:void 0},l={good:"#66BB6A",satisfactory:"#9CCC65",moderate:"#D4E157",poor:"#FFA726",veryPoor:"#F44336",severe:"#B71C1C"},d=function(e){var t=((new Date).getTime()-new Date(e).getTime())/1e3;if(0===parseInt(t))return"Just Now";if(t<60)return parseInt(t)+" second"+(parseInt(t)>1?"s":"")+" ago";var c=t/60;if(c<60)return parseInt(c)+" minute"+(parseInt(c)>1?"s":"")+" ago";var n=c/60;if(n<24)return parseInt(n)+" hour"+(parseInt(n)>1?"s":"")+" ago";var r=n/24;if(r<30)return parseInt(r)+" day"+(parseInt(r)>1?"s":"")+" ago";var a=r/30;if(a<12)return parseInt(a)+" month"+(parseInt(a)>1?"s":"")+" ago";var s=a/12;return parseInt(s)+" year"+(parseInt(s)>1?"s":"")+" ago"},b=c(2),u=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)(null),s=Object(i.a)(a,2),l=s[0],u=s[1],h=Object(n.useCallback)((function(){var e,t=250,c=new WebSocket("wss://city-ws.herokuapp.com/\u200c");c.onopen=function(){console.log("connected websocket app component"),u(c),t=250,clearTimeout(e)},c.onmessage=function(e){var t=JSON.parse(e.data);if(t&&Array.isArray(t)){var c=t.reduce((function(e,t){return t.timestamp=new Date,e[t.city]=t,e}),{});r((function(e){return e?Object(o.a)(Object(o.a)({},e),c):c}))}},c.onclose=function(c){console.log("Socket is closed. Reconnect will be attempted in ".concat(Math.min(10,(t+t)/1e3)," second."),c.reason),t+=t,e=setTimeout(O,Math.min(1e4,t))},c.onerror=function(e){console.error("Socket encountered error: ",e.message,"Closing socket"),c.close()}}),[]),O=Object(n.useCallback)((function(){l&&l.readyState!==WebSocket.CLOSED||h()}),[h,l]);Object(n.useEffect)((function(){h()}),[h]);return Object(b.jsxs)("div",{className:"chartContainer",children:[function(){if(null===c)return Object(b.jsx)("p",{className:"noContent",children:"Loading..."});var e=Object.keys(c);return 0===e.length?Object(b.jsx)("p",{className:"noContent",children:"No Data Found."}):Object(b.jsx)("div",{className:"tableWrapper",children:Object(b.jsxs)("table",{cellPadding:"0",cellSpacing:"0",border:"0",className:"apiTable",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:"City"}),Object(b.jsx)("td",{children:"Current AQI"}),Object(b.jsx)("td",{children:"Last Updated"})]})}),Object(b.jsx)("tbody",{children:e.map((function(e){var t=c[e];return Object(b.jsxs)("tr",{style:{backgroundColor:j(t.aqi)},children:[Object(b.jsx)("td",{children:t.city}),Object(b.jsx)("td",{children:t.aqi.toFixed(2)}),Object(b.jsx)("td",{children:d(t.timestamp)})]},e)}))})]})})}(),c&&Object(b.jsx)(k,{aqiData:c})]})},h=function(){return Object(b.jsxs)("ul",{className:"indicator",children:[Object(b.jsxs)("li",{children:[Object(b.jsx)("span",{style:{backgroundColor:l.good}}),Object(b.jsx)("span",{children:"0-50 (Good)"})]}),Object(b.jsxs)("li",{children:[Object(b.jsx)("span",{style:{backgroundColor:l.satisfactory}}),Object(b.jsx)("span",{children:"50-100 (Satisfactory)"})]}),Object(b.jsxs)("li",{children:[Object(b.jsx)("span",{style:{backgroundColor:l.moderate}}),Object(b.jsx)("span",{children:"100-200 (Moderate)"})]}),Object(b.jsxs)("li",{children:[Object(b.jsx)("span",{style:{backgroundColor:l.poor}}),Object(b.jsx)("span",{children:"200-300 (Poor)"})]}),Object(b.jsxs)("li",{children:[Object(b.jsx)("span",{style:{backgroundColor:l.veryPoor}}),Object(b.jsx)("span",{children:"300-400 (Very Poor)"})]}),Object(b.jsxs)("li",{children:[Object(b.jsx)("span",{style:{backgroundColor:l.severe}}),Object(b.jsx)("span",{children:"400-500 (Severe)"})]})]})},O=c(159),p=c(311),x=c(312),f=c(156),m=c(157),y=c(66),g=c(160),v=function(e){var t,c=e.payload,n=e.label;return e.active?Object(b.jsxs)("div",{className:"custom-tooltip",style:{backgroundColor:j(c[0].value)},children:[Object(b.jsx)("h3",{children:(t=c[0].value,t>=0&&t<=50?"Good":t>50&&t<=100?"Satisfactory":t>100&&t<=200?"Moderate":t>200&&t<=300?"Poor":t>300&&t<=400?"Very Poor":t>400&&t<=500?"Severe":void 0)}),Object(b.jsx)("p",{className:"city",children:n}),Object(b.jsx)("p",{className:"aqi",children:"Aqi : ".concat(c[0].value.toFixed(2))}),Object(b.jsx)("p",{className:"updatedAt",children:"Last Updated: ".concat(d(c[0].payload.timestamp))})]}):null},C=function(e){var t=e.x,c=e.y,n=e.width,r=e.height,a=e.aqi;return Object(b.jsx)("rect",{x:t,y:c,width:n,height:r,style:{fill:j(a)}})},k=function(e){var t=e.aqiData,c=Object.keys(t).reduce((function(e,c){return e=[].concat(Object(O.a)(e),[t[c]])}),[]);return Object(b.jsx)("div",{className:"chartWrapper",children:Object(b.jsx)(p.a,{width:"100%",height:"100%",children:Object(b.jsxs)(x.a,{width:500,height:300,data:c,margin:{top:5,right:30,left:20,bottom:5},children:[Object(b.jsx)(f.a,{dataKey:"city",stroke:"#fff"}),Object(b.jsx)(m.a,{tickCount:25,stroke:"#fff"}),Object(b.jsx)(y.a,{content:Object(b.jsx)(v,{})}),Object(b.jsx)(g.a,{dataKey:"aqi",fill:"#fff",shape:Object(b.jsx)(C,{})})]})})})},I=(c(308),function(){return Object(b.jsxs)("div",{className:"app",children:[Object(b.jsx)("header",{className:"header",children:Object(b.jsx)("h1",{children:"Air Quality Monitoring"})}),Object(b.jsxs)("main",{children:[Object(b.jsx)(h,{}),Object(b.jsx)(u,{})]})]})}),N=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,317)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;c(e),n(e),r(e),a(e),s(e)}))};s.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(I,{})}),document.getElementById("root")),N()}},[[309,1,2]]]);
//# sourceMappingURL=main.2175be6c.chunk.js.map