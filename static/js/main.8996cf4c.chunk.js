(this.webpackJsonpproximity=this.webpackJsonpproximity||[]).push([[0],{10:function(e,t,n){},12:function(e,t,n){},13:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),s=n(4),o=n.n(s),a=(n(10),n(3)),i=n(5),j={good:"#66BB6A",satisfactory:"#9CCC65",moderate:"#D4E157",poor:"#FFA726",veryPoor:"#F44336",severe:"#B71C1C"},l=function(e){var t=((new Date).getTime()-new Date(e).getTime())/1e3;if(0===parseInt(t))return"Just Now";if(t<60)return parseInt(t)+" second"+(parseInt(t)>1?"s":"")+" ago";var n=t/60;if(n<60)return parseInt(n)+" minute"+(parseInt(n)>1?"s":"")+" ago";var r=n/60;if(r<24)return parseInt(r)+" hour"+(parseInt(r)>1?"s":"")+" ago";var c=r/24;if(c<30)return parseInt(c)+" day"+(parseInt(c)>1?"s":"")+" ago";var s=c/30;if(s<12)return parseInt(s)+" month"+(parseInt(s)>1?"s":"")+" ago";var o=s/12;return parseInt(o)+" year"+(parseInt(o)>1?"s":"")+" ago"},d=n(0),b=void 0,u=function(){var e=Object(r.useState)(null),t=Object(i.a)(e,2),n=t[0],c=t[1];Object(r.useEffect)((function(){!function(){var e,t=250,n=new WebSocket("wss://city-ws.herokuapp.com/\u200c");n.onopen=function(){console.log("connected websocket app component"),t=250,clearTimeout(e)},n.onmessage=function(e){var t=JSON.parse(e.data);if(t&&Array.isArray(t)){var n=t.reduce((function(e,t){return t.timestamp=new Date,e[t.city]=t,e}),{});c((function(e){return e?Object(a.a)(Object(a.a)({},e),n):n}))}},n.onclose=function(n){console.log("Socket is closed. Reconnect will be attempted in ".concat(Math.min(10,(t+t)/1e3)," second."),n.reason),t+=t,e=setTimeout(s,Math.min(1e4,t))},n.onerror=function(e){console.error("Socket encountered error: ",e.message,"Closing socket"),n.close()}}()}),[]);var s=function(){var e=b.state.ws;e&&e.readyState!==WebSocket.CLOSED||b.connect()};return function(){if(null===n)return Object(d.jsx)("p",{className:"noContent",children:"Loading..."});var e=Object.keys(n);return 0===e.length?Object(d.jsx)("p",{className:"noContent",children:"No Data Found."}):Object(d.jsxs)("table",{cellPadding:"0",cellSpacing:"0",border:"0",className:"apiTable",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:"City"}),Object(d.jsx)("td",{children:"Current AQI"}),Object(d.jsx)("td",{children:"Last Updated"})]})}),Object(d.jsx)("tbody",{children:e.map((function(e){var t,r=n[e];return Object(d.jsxs)("tr",{style:{backgroundColor:(t=r.aqi,t>=0&&t<=50?j.good:t>50&&t<=100?j.satisfactory:t>100&&t<=200?j.moderate:t>200&&t<=300?j.poor:t>300&&t<=400?j.veryPoor:t>400&&t<=500?j.severe:void 0)},children:[Object(d.jsx)("td",{children:r.city}),Object(d.jsx)("td",{children:r.aqi.toFixed(2)}),Object(d.jsx)("td",{children:l(r.timestamp)})]},e)}))})]})}()},p=function(){return Object(d.jsxs)("ul",{className:"indicator",children:[Object(d.jsxs)("li",{children:[Object(d.jsx)("span",{style:{backgroundColor:j.good}}),Object(d.jsx)("span",{children:"0-50 (Good)"})]}),Object(d.jsxs)("li",{children:[Object(d.jsx)("span",{style:{backgroundColor:j.satisfactory}}),Object(d.jsx)("span",{children:"50-100 (Satisfactory)"})]}),Object(d.jsxs)("li",{children:[Object(d.jsx)("span",{style:{backgroundColor:j.moderate}}),Object(d.jsx)("span",{children:"100-200 (Moderate)"})]}),Object(d.jsxs)("li",{children:[Object(d.jsx)("span",{style:{backgroundColor:j.poor}}),Object(d.jsx)("span",{children:"200-300 (Poor)"})]}),Object(d.jsxs)("li",{children:[Object(d.jsx)("span",{style:{backgroundColor:j.veryPoor}}),Object(d.jsx)("span",{children:"300-400 (Very Poor)"})]}),Object(d.jsxs)("li",{children:[Object(d.jsx)("span",{style:{backgroundColor:j.severe}}),Object(d.jsx)("span",{children:"400-500 (Severe)"})]})]})},O=(n(12),function(){return Object(d.jsxs)("div",{className:"app",children:[Object(d.jsx)("header",{className:"header",children:Object(d.jsx)("h1",{children:"Air Quality Monitoring"})}),Object(d.jsxs)("main",{children:[Object(d.jsx)(p,{}),Object(d.jsx)(u,{})]})]})}),h=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,14)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),s(e),o(e)}))};o.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(O,{})}),document.getElementById("root")),h()}},[[13,1,2]]]);
//# sourceMappingURL=main.8996cf4c.chunk.js.map